<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smooth Dynamische Kreisförmige Fortschrittsanzeige</title>

  <style>
    #progress-circle text {
      user-select: none;
    }

    #progress-path {
      transition: stroke-dashoffset 0.3s ease-out, d 0.3s ease-out;
      /* Sanfte Übergänge für den Strich und den Pfad */
    }
  </style>

  <script>
    const progressPath = document.getElementById('progress-path');
    const progressText = document.getElementById('progress-text');
    const radius = 50;
    const circumference = 2 * Math.PI * radius;

    function setProgress(percent) {
      const offset = circumference - percent / 100 * circumference;
      progressPath.style.strokeDasharray = circumference;
      progressPath.style.strokeDashoffset = offset;
      progressText.textContent = `${Math.round(percent)}%`;

      const angle = percent / 100 * 2 * Math.PI - Math.PI / 2;
      const x = 60 + radius * Math.cos(angle);
      const y = 60 + radius * Math.sin(angle);
      const largeArcFlag = percent > 50 ? 1 : 0;
      const pathData = `M 60 10 A ${radius} ${radius} 0 ${largeArcFlag} 1 ${x} ${y}`;
      progressPath.setAttribute('d', pathData);
    }

    function updateProgress() {
      const percentage = parseFloat(document.getElementById('percentageInput').value);
      if (!isNaN(percentage) && percentage >= 0 && percentage <= 100) {
        // Hier könnten wir optional eine kleine Verzögerung einbauen,
        // falls die Aktualisierung zu schnell aufeinander folgt.
        // setTimeout(() => {
        setProgress(percentage);
        // }, 100); // Beispiel für eine 100ms Verzögerung
        setProgress(percentage); // Direkte Aktualisierung, die CSS-Transition nutzt
      }
    }

    // Initialisierung
    updateProgress();
  </script>

</head>

<body>

  <svg id="progress-circle" width="120" height="120" viewBox="0 0 120 120">
    <circle cx="60" cy="60" r="50" fill="none" stroke="#e0e0e0" stroke-width="10" />
    <path id="progress-path" d="M 60 10 A 50 50 0 0 1 60 10" fill="none" stroke="#f44336" stroke-width="10"
      stroke-linecap="round" />
    <text id="progress-text" x="60" y="65" text-anchor="middle" font-size="20" fill="#f44336">0%</text>
  </svg>

  <input type="number" id="percentageInput" min="0" max="100" value="54">
  <button onclick="updateProgress()">Aktualisieren</button>

</body>

</html>